(function(){"use strict";var t={6731:function(t,e,i){var n=i(6848),s=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("app-simon-game")],1)},a=[],o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"simon-game"},[t.isGameInit?[e("div",{staticClass:"simon-game__buttons"},t._l(t.buttons,(function(i,n){return e("AppSimonButton",{key:i.id,attrs:{color:i.color,active:t.activeSectorIndex===n,disabled:!t.isPlayable},on:{click:function(e){return t.buttonClick(n)}}})})),1),e("div",{staticClass:"simon-game__info"},[t.isFirstPlay?[e("div",[e("button",{staticClass:"simon-game__button",on:{click:t.startGame}},[t._v("Start game")])])]:t.isUserLose?[e("p",[t._v(" Your score "),e("b",[t._v(t._s(t.currentRound)+" ")]),t._v("!!! ")]),e("div",[e("button",{staticClass:"simon-game__button",on:{click:t.startGame}},[t._v("Try again")])])]:[e("div",[t._v("Current round: "+t._s(t.currentRound))])],e("div",{staticClass:"simon-game__options",class:{"simon-game__options--disabled":t.isGameOn}},[e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.playbackTime,expression:"playbackTime"}],staticClass:"simon-game__radio",attrs:{type:"radio",id:"easy"},domProps:{value:1.5,checked:t._q(t.playbackTime,1.5)},on:{change:function(e){t.playbackTime=1.5}}}),e("label",{staticClass:"simon-game__label",attrs:{for:"easy"}},[t._v("easy")])]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.playbackTime,expression:"playbackTime"}],staticClass:"simon-game__radio",attrs:{type:"radio",id:"normal"},domProps:{value:1,checked:t._q(t.playbackTime,1)},on:{change:function(e){t.playbackTime=1}}}),e("label",{staticClass:"simon-game__label",attrs:{for:"normal"}},[t._v("normal")])]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.playbackTime,expression:"playbackTime"}],staticClass:"simon-game__radio",attrs:{type:"radio",id:"hard"},domProps:{value:.4,checked:t._q(t.playbackTime,.4)},on:{change:function(e){t.playbackTime=.4}}}),e("label",{staticClass:"simon-game__label",attrs:{for:"hard"}},[t._v("hard")])])])],2)]:[e("button",{staticClass:"simon-game__button",on:{click:t.initGame}},[t._v("start")])]],2)},r=[];i(4114);function c(t){return new Promise(((e,i)=>{const n=[];function s(a){a?a().then((e=>{n.push(e),s(t.shift())})).catch((t=>{i(t)})):e(n)}s(t.shift())}))}var u=function(){var t=this,e=t._self._c;return e("div",[e("button",{staticClass:"simon-button",class:{"simon-button--active":t.active},attrs:{color:t.color,disabled:t.disabled},on:{click:function(e){return t.$emit("click")}}})])},l=[];const d={name:"AppSimonButton",props:{color:{type:String,required:!0},active:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}}},m=()=>{(0,n.$9)(((t,e)=>({"543aed5c":t.color})))},h=d.setup;d.setup=h?(t,e)=>(m(),h(t,e)):m;var p=d,b=p,f=i(1656),y=(0,f.A)(b,u,l,!1,null,"d588ec7c",null),v=y.exports;const g=.1,_=.2,S=.5,A=.4,k={name:"AppSimonGame",components:{AppSimonButton:v},data(){return{audioContext:null,isGameInit:!1,isFirstPlay:!0,isGameOn:!1,isPlayable:!1,isUserLose:!1,playbackTime:1,buttonsNums:4,buttons:[],activeSectorIndex:-1,roundNumber:0,userSelectedArray:[],gameSelectedArray:[]}},computed:{currentRound(){return this.roundNumber+1}},methods:{initGame(){this.audioContext=new AudioContext,this.buttons=[...Array(this.buttonsNums)].map(((t,e)=>{const i=this.audioContext.createGain();i.gain.value=0,i.connect(this.audioContext.destination);const n=this.audioContext.createOscillator();n.type="sine",n.frequency.value=200+100*(e+1),n.connect(i),n.start();let s=null;const a=()=>{clearTimeout(s),i.gain.setTargetAtTime(0,this.audioContext.currentTime,g)},o=(t=_)=>{i.gain.setTargetAtTime(S,this.audioContext.currentTime,g),s=setTimeout(a,1e3*t)};return{id:e,color:`hsl(${360*e/this.buttonsNums}, 100%, 50%)`,gainNode:i,osc:n,soundPlay:t=>{s&&a(),o(t)},soundSilence:a}})),this.isGameInit=!0},getRandomSector(){return Math.floor(Math.random()*this.buttonsNums)},startGame(){this.roundNumber=0,this.userSelectedArray=[],this.gameSelectedArray=[],this.isUserLose=!1,this.isPlayable=!1,this.activeSectorIndex=-1,this.isGameOn=!0,this.gameSelectedArray.push(this.getRandomSector()),this.playSelectedSectors()},getPlayQueue(){const t=[];return this.gameSelectedArray.forEach((e=>{t.push((()=>new Promise((t=>{this.activeSectorIndex=-1,setTimeout((()=>{this.activeSectorIndex=this.buttons[e].id,this.buttons[e].soundPlay(this.playbackTime),setTimeout((()=>{t()}),1e3*this.playbackTime)}),1e3*A)}))))})),t},playSelectedSectors(){const t=this.getPlayQueue();c(t).then((()=>{this.isPlayable=!0,this.activeSectorIndex=-1}))},silenceAllButtons(){this.buttons.forEach((t=>{t.soundSilence()}))},buttonClick(t){this.silenceAllButtons(),this.buttons[t].soundPlay(),this.userSelectedArray.push(t)},win(){this.roundNumber+=1,this.userSelectedArray=[]},lose(){this.isUserLose=!0,this.isGameOn=!1}},watch:{userSelectedArray:function(){0!==this.userSelectedArray.length&&(this.isPlayable=!1,this.userSelectedArray.length===this.gameSelectedArray.length?this.userSelectedArray.join("")===this.gameSelectedArray.join("")?this.win():this.lose():this.userSelectedArray.join("")===this.gameSelectedArray.slice(0,this.userSelectedArray.length).join("")?this.isPlayable=!0:this.lose())},roundNumber:function(){0!==this.roundNumber&&(this.gameSelectedArray.push(this.getRandomSector()),this.playSelectedSectors())},isGameOn:{handler:function(){this.isFirstPlay=!1}}}},T=()=>{(0,n.$9)(((t,e)=>({"63a52f02":t.buttonsNums})))},C=k.setup;k.setup=C?(t,e)=>(T(),C(t,e)):T;var x=k,P=x,w=(0,f.A)(P,o,r,!1,null,"f07f52cc",null),O=w.exports,G={name:"App",components:{AppSimonGame:O}},N=G,j=(0,f.A)(N,s,a,!1,null,null,null),I=j.exports;n.Ay.config.productionTip=!1,n.Ay.config.devtools=!0,new n.Ay({render:t=>t(I)}).$mount("#app")}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,i),a.exports}i.m=t,function(){var t=[];i.O=function(e,n,s,a){if(!n){var o=1/0;for(l=0;l<t.length;l++){n=t[l][0],s=t[l][1],a=t[l][2];for(var r=!0,c=0;c<n.length;c++)(!1&a||o>=a)&&Object.keys(i.O).every((function(t){return i.O[t](n[c])}))?n.splice(c--,1):(r=!1,a<o&&(o=a));if(r){t.splice(l--,1);var u=s();void 0!==u&&(e=u)}}return e}a=a||0;for(var l=t.length;l>0&&t[l-1][2]>a;l--)t[l]=t[l-1];t[l]=[n,s,a]}}(),function(){i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,{a:e}),e}}(),function(){i.d=function(t,e){for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};i.O.j=function(e){return 0===t[e]};var e=function(e,n){var s,a,o=n[0],r=n[1],c=n[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(s in r)i.o(r,s)&&(i.m[s]=r[s]);if(c)var l=c(i)}for(e&&e(n);u<o.length;u++)a=o[u],i.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return i.O(l)},n=self["webpackChunkmedods_test_2"]=self["webpackChunkmedods_test_2"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=i.O(void 0,[504],(function(){return i(6731)}));n=i.O(n)})();
//# sourceMappingURL=app.ae5a54d6.js.map